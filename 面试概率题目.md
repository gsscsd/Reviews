## 常见的面试概率题目

1. 在半径为1的圆中随机选取一点。

  > 方法1：在x轴[-1,1]，y轴[-1,1]的正方形随机选取一点，如果此点在圆内，则即为所求的点。如果不在圆内，则重新随机直到选到了为止。
  >
  > 方法2：从[0, 2*pi)随机选取一个角度，再在这个方向的半径上随机选取一个点。但半径上的点不能均匀选取，选取的概率要和离圆心的距离成正比，这样才能保证随机点在圆内是均匀分布的。

2.  一根木棒，截成三截，组成三角形的概率是多少？

> 设第一段截x，第二段截y，第三段1-x-y。考虑所有可能的截法。可能的截法中必须保证三条边都是正数且小于原来边长，则有$0<x<1，0<y<1，0<1-x-y<1$，画图可知，(x,y)必须在单位正方形的左下角的半个直角三角形里，面积为1/2。然后考虑能形成三角形的截法。首先要满足刚才的三个条件$0<x<1，0<y<1，0<1-x-y<1$，然后必须符合三角形的边的要求，即两边之和大于第三边，$x+y>1-x-y，x+1-x-y>y，y+1-x-y>x$，化简即得$0<x<1/2，0<y<1/2，1/2<x+y<1$, 画图可知，此时(x,y)必须在边长为1/2的三角形的右上角的半个直角三角形里，面积为1/8。于是最终概率为 (1/8)/(1/2) = 1/4。

3.  抛一个六面的色子，连续抛直到抛到6为止，问期望的抛的次数是多少。

> 因为每次抛到6的概率相等，都是1/6，于是期望的次数就是1/(1/6)=6次。下面用一种不一样的方法解答，假设期望的次数为E。考虑第一次抛，如果已经抛到6了（概率为1/6），那么就不用再抛了。如果没抛到6（概率为5/6），那么还需要继续抛，可是还要抛多少次呢？显然，现在开始知道抛到6的次数仍然是E，但是刚刚已经抛了一次了于是可以得到这个等式E = 1 * 1/6 + (1 + E) * 5/6，解得 E = 6。即期望的次数为6次。

4.  一个木桶里面有M个白球，每分钟从桶中随机取出一个球涂成红色（无论白或红都涂红）再放回，问将桶中球全部涂红的期望时间是多少？

   > 令桶中有i个红球后再把全部球涂红的期望时间为a[i]，此时再取出一个球，如果是红色的（概率为i/M），则直接放回，且剩余的期望时间仍是a[i]。如果是白色的（概率为1-i/M），则涂红后放回，剩余的期望时间为a[i+1]，则a[i] = (1 + a[i]) * i/M + (1 + a[i+1]) * (1 – i/M)。即a[i] = a[i+1] + M/(M-i)显然，有a[M] = 0可以解得 a[0] = M/M + M/(M-1) + … + M/1 + 0。

5. 你有一把宝剑。每使用一个宝石，有50%的概率会成功让宝剑升一级，50%的概率会失败。如果宝剑的级数大于等于5的话，那么失败会使得宝剑降1级。如果宝剑的级数小于5的话，失败没有效果。问题是：期望用多少个宝石可以让一把1级的宝剑升到9级？

   > 问题比较简单，用a[i]表示从第i-1级升到第i级期望使用的宝石数量。
   >
   > 当i<=5时，因为不会降级，则期望的数量均为2，即a[2] = a[3] = a[4] = a[5] = 2
   >
   > 当i>5时，因为会降级，成功时一个宝石就够了，不成功时需要倒退一级，需要先使用a[i-1]个宝石先回到i-1级，再使用a[i]个宝石升到第i级，即a[i] = 1 * 1/2 + (1 + a[i-1] + a[i]) * 1/2。即 a[i] = a[i-1] + 2可知，a[6]= 4, a[7] = 6, a[8] = 8, a[9] = 10则1级到9级需要的宝石数为 a[2]+…+a[9] = 36。

6. 已知有个rand7()的函数，返回1到7随机自然数，怎样利用这个rand7()构造rand10()，随机1~10。

   > 产生随机数的主要原则是每个数出现的概率是相等的，如果可以得到一组等概率出现的数字，那么就可以从中找到映射为1~10的方法。
   > rand7()返回1~7的自然数，构造新的函数 (rand7()-1)*7 + rand7()，这个函数会随机产生1~49的自然数。原因是1~49中的每个数只有唯一的第一个rand7()的值和第二个rand7()的值表示，于是它们出现的概率是相等。
   > 但是这里的数字太多，可以丢弃41~49的数字，把1~40的数字分成10组，每组映射成1~10中的一个，于是可以得到随机的结果。
   > 具体方法是，利用(rand7()-1)*7 + rand7()产生随机数x，如果大于40则继续随机直到小于等于40为止，如果小于等于40，则产生的随机数为(x-1)/4+1。

7. 已知有个randM()的函数，返回1到M随机自然数，怎样利用这个randM()构造randN()，随机1~N。

   > 上题的扩展。
   > 当N<=M时可以直接得到。
   > 当N>M时，类似构造(randM()-1)*M + randM()，可以产生$1～M^2（即randM^2）$，可以在M^2中选出N个构造1~N的映射。
   > 如果$M^2$还是没有N大，则可以对于randM^2继续构造，直到成功为止。

8. 已知一随机发生器，产生0的概率是p，产生1的概率是1-p，现在要你构造一个发生器，使得它产生0和1的概率均为1/2。

   > 考虑连续产生两个随机数，结果只有四种可能：00、01、10、11，其中产生01和产生10的概率是相等的，均为p*(1-p)，于是可以利用这个概率相等的特性等概率地产生01随机数。
   > 比如把01映射为0,10映射为1。于是整个方案就是：
   > 产生两个随机数，如果结果是00或11就丢弃重来，如果结果是01则产生0，结果是10则产生1。

9. 已知一随机发生器，产生的数字的分布不清楚，现在要你构造一个发生器，使得它产生0和1的概率均为1/2。

   > 思路类似，考虑连续产生两个随机数a、b，结果有三种情况a==b，a>b，a\<b，其中由于a和b的对称性，a>b和a\<b出现的概率是相等的，于是可以利用这个概率相等的特性等概率地产生01随机数。方法类似。
   > 或者可以找到另一种概率相等的事件，比如选择一个阈值th，把随机数的结果分为小于阈值和大于等于阈值两种情况，于是连续产生两个随机数，他们一个小于阈值，另一个大于等于阈值的概率是相等。然后类似产生随机数。

10. 已知一随机发生器，产生0的概率是p，产生1的概率是1-p，构造一个发生器，使得它构造1、2、3的概率均为1/3；…。更一般地，构造一个发生器，使得它构造1、2、3、…n的概率均为1/n。

    > 此时我们已经知道，要从n个数中等概率地产生一个随机数，关键是要找到n个或更多个出现概率相等的事件，然后我们重复随机地产生事件，如果是跟这n个事件不同的事件直接忽略，直到产生这n个事件中的一个，然后就产生跟这个事件匹配的随机数。由于n个事件发生的概率相等，于是产生的随机数的概率也是相等的。
    > 考虑连续产生x个随机数，结果应该是x个0跟1的组合，为了使某些结果出现的概率相等，我们应该要让这个结果中0和1出现的次数相等，即各占一半。于是x的长度必须是偶数的，为了方便，考虑连续产生2x个随机数。每个0跟1各出现一半的结果可以赋予1到n的某个数，为了能够表示这n个数，需要0跟1各出现一半的总结果数大于等于n，即
    > C(2*x, x) >= n
    > 解出最小的x即为效率最高的x。
    > 然后把前n个0和1个出现一半的结果分别赋予1到n的值。随机时连续产生2*x个数，如果不是这n个结果中的一个则重新随机，如果是的话则产生对应的值作为随机结果。

11. 给出从n个数中随机选择m个数的方法。n很大，可以认为是亿级别。m可以很小，如接近1；也可以很大，如接近n。
    一个直接的思路是一直重复地随机，直到随机到m个数为止。这个方法有两个弊端：

    > 1. 难以直到后面随机到的一个数是否在前面已经随机过了，因为数据量很大，无法保存在内存中，如果保存到外存中则时间花费太大。
    > 2. 如果m很大，甚至接近于n，则后面随机到的数字基本上都是前面随机过的，因而需要尝试的随机次数太多。
    >    一个思路是每个数被选中的概率是m/n，则可以遍历一遍原数据，在遍历每个数字的同时以m/n的概率决定是否要选择当前数字，则当遍历完毕的时候，选择到的数字在平均意义就是m个。这个会随着n的增大而更好地趋近于m，但不能很精确地保证随机到的数字一定是m个。
    >    以上思路虽然不能满足要求，但我们可以进行改进。刚才我们在遍历每个数字的时候都是以同样的概率m/n决定是否要选择该数字，实际上，在当前遍历数字的前面的数字的结果我们是已经知道了，我们可以根据前面的随机结果动态地调整当前的随机策略，使得最终能够保证随机到的数字一定是m个。
    >    具体的做法是，遍历第1个数字时有m/n的概率进行选择，如果选择了第1个数字，则第2个数字被选择的概率调整为(m-1)/(n-1)，如果没选择第1个数字，则第2个数字被选择的概率为m/(n-1)。即遍历到第i个数字的时候，如果此时已经选择了k个，则以(m-k)/(n-i+1)的概率决定是否要选择当前的第i个数字。
    >    这样可以保证每次都能够保证在剩下的数字中能选择适当的数使得总体选择的数字是m个。比如，如果前面已经随机了m个，则后面随机的概率就变为0。如果前面一直都没随机到数字，则后面随机到的概率就会接近1。最终得到的结果始终精确地是m个数字。

12.  给出从n个数中随机选择1个的方法。注意，n非常大，并且一开始不知道其具体值。数字是一个一个给你的，当给完之后，你必须立刻给出随机的结果。

    > 这里n的值非常大，而且要求立即给出答案，所以不能把所有的数字先保存起来，然后再慢慢考虑要随机哪个。
    > 这题跟上面一题比较类似，因为我们不知道数字到底有多少个，所以必须在得到每一个数字的时候就有一个当前的结果，这样在数字给完的时候可以给出答案。
    > 于是第1个数字是必须要拿的。问题是当第2个数字来的时候，究竟要保留手上的数字，还是拿当前的第2个数字呢？更一般地，当第i（i>1）个数字来的时候，究竟是保留手上的数字，还是选择当前的第i个数字呢？
    > 答案是要保证每个数字被选取的概率是相等，当第i个数来的时候，如果我们已经保证了前i-1个数每个数被选取的概率都是相等的，那么只要第i个数字被选取的概率是1/i，我们就可以知道所有i个数被选取的概率都是1/i了。所以只需要以1/i的概率决定是否要选取当前的第i个数字即可。
    > 于是可以保证对于任意的n，当给完n个数字时，选择每个数字的概率都是相等的，为1/n。

13. 给出从n个数中随机选择m个的方法。注意，n非常大，并且一开始不知道其具体值。数字是一个一个给你的，当给完之后，你必须立刻给出随机的结果。

    > 这题是上一题的推广，于是可以仿照着进行。
    > 首先前m个数字是必须拿的。问题是当第i（i>m）个数字来的时候，究竟是要丢弃这个数，还是保留这个数？如果要保留这个数的话，则必须得丢弃手中已有的m个数，那是怎么确定丢弃哪个呢？
    > 下面是就具体的做法。第i个数到来的时候，以m/i的概率决定是否要选择这个数字。如果选择了这个数字，则随机地替换掉手上m个数字中的一个。
    > 如果前i-1个数字的时候保证了每个数字被选取的概率相等，则这样做之后可以保证每个数字被选取的概率也相等，为m/i。
    >
    > 1. 第i个数选择的概率是m/i，因为算法就是这样决定的。
    > 2. 考虑前i-1个数字中的任意一个，它在第i个数之前被选择的概率是m/(i-1)。在第i个数字的时候，这个数字要被选择的话又两种可能，一是第i个数没有被选中（概率是1-m/i），二是第i个数倍选中了（概率是m/i）但是替换掉的数字不是它（概率是1-1/m），于是这个数在第i个数时仍然被选择的概率是m/(i-1) * ((1-m/i) + (m/i * (1-1/m))) = m / (i-1) * ((i-1) / i) = m/i。
    >    由数学归纳法原理知，对于任意的n，当给完n个数的时候，选择的结果可以保证这n个数中每个被选中的概率都是相等

14. 一个桶里面有白球、黑球各100个，现在按下述规则取球： 

    - i 、每次从桶里面拿出来两个球； 
    - ii、如果取出的是两个同色的求，就再放入一个黑球； 
    - iii、如果取出的是两个异色的求，就再放入一个白球。 
      问：最后桶里面只剩下一个黑球的概率是多少？

    > 答： 
    > 动态规划，令f[i,j]表示有i个白球，j个黑球的概率。 
    > 已知f[100,100] = 1, 求f[0,1]。 
    > 拿到两个白球: f[i-2,j+1] = i/(i+j) * (i-1)/(i+j-1) * f[i,j] 
    > 拿到两个黑球: f[i, j-1] = j/(i+j) * (j-1)/(i+j-1) * f[i,j] 
    > 拿到一黑一白: f[i, j-1] =2 * i/(i+j) * j/(i+j-1) * f[i,j]

15. 10个人出去玩，集合时间有10分钟，每个人都在该时间内到达，概率均匀分布，彼此独立，那么最后一个人最有可能到达的时间是?

    >  遇到这种想不明白，最好的方法就是枚举。 
    > 若最后一个人在10分钟到达（概率1/10），其他人也都已经到达了（概率是1），总概率是 19 * (1/10) 
    > 若最后一个人在9分钟到达（概率1/10），其他人到达的概率是(9/10)9，总概率是 (9/10)9 * (1/10) 
    > 依此类推。可见概率最大的是第10分钟。

16. 已知随机数生成函数f()，返回0的概率是60%，返回1的概率是40%。根据f()求随机数函数g()，使返回0和1的概率是50%，不能用已有的随机生成库函数。

    > 调用f()两次即可，会出现4种结果(0,0), (0,1), (1,0), (1,1)，其中出现(0,1), (1,0)的概率是一样的，可以构造出等概率事件，比如出现(0,1)可返回0，出现(1,0)可返回1，如果出现其他两种情况则舍掉重新调用。 

17. 给定rand5()，实现一个方法rand7()。也即，给定一个产生0到4（含）随机数方法，编写一个产生0到6（含）随机数的方法。

    > 随机数函数的关键是确保产生每一个数的的概率相等。我们可用通过5 * rand5() + rand5()产生[0:24]，舍弃[21:24]，最后除以7取余数，则可得到概率相等的[0:6]的数值。 

18. 100个人排队，每个人只能看到自己之前的人的帽子的颜色（假设只有黑白两色），每个人都得猜自己帽子的颜色，只能说一次，说错就死掉，别人可以听到之前的人的答案以及是否死掉。请问用什么策略说死掉的人最少。

    > 假设只有3个人，假设ture = 白，false = 黑，用这个公式x3 = (x1 == x2)，用人话就是1和2的帽子颜色一样的话就说白，不一样的话就说黑。这个策略第一个人死的概率是1/2，剩下的两个都不会死。 
    > 推广到4个人，也就是x4 = (x3 == (x1 == x2))，照理可以推广到100人。但问题就是人很难判断，只能靠计算机来算。 
    > 另一个解题方法：“最后一个人看一下前面黑帽子的个数是奇数还是偶数，比如约定奇数说黑，偶数说白。这样前面的人都可以推断出来正确的结果。”

19. 54张牌，平均分成三堆，大小王在同一堆的概率？

    > 54张牌分成3等份，共有M=(C54取18)\*(C36取18)\*(C18取18)种分法。其中大小王在同一份的分法有N=(C3取1)\*(C52取16)\*(C36取18)\*(C18取18)种。因此所求概率为P=N /M=17/53。
    >
    > 解答2：不妨记三份为A、B、C份。大小王之一肯定在某一份中，不妨假定在A份中，概率为1/3。然后A份只有17张牌中可能含有另一张王，而B份、C份则各有18张牌可能含有另一张王，因此A份中含有另一张王的概率是17/(17+18+18)=17/53。也因此可知，A份中同时含有大小王的概率为1/3 * 17/53。题目问的是出现在同一份中的概率，因此所求概率为3*(1/3 * 17/53)=17/53。

20. 买饮料，三个瓶盖可以换一瓶，请问要买100瓶饮料，最少需要买多少瓶？

    > 设要买x瓶。 
    > x+x/3>=100 
    > 对么？小心！x/3瓶如果满3瓶还可以再换的，想象某人堵在小卖部门口狂开瓶。因此应该是 
    > $$
    > x+x/3+x/9+...+x/3n>=100 \\
    > n=log3x \\
    > x(1−1/3n)/(1−1/3)>=100 \\
    > x(1−1/x)>=200/3 \\
    > x=68\\
    > $$
    > 不过我返回去算了下, 发现x=68只能买99瓶…毕竟算的时候当x是实数了，因此还是再返回来推一下的靠谱，x=69。

21. 有一个很大很大的输入流，大到没有存储器可以将其存储下来，而且只输入一次，如何从这个输入流中等概率随机取得m个记录。

    > 如果可以输入两次，那就可以统计出总数N, 再随机0到N-1数，判个重。但是这里只能输入一次，这里给出两种方法。
    > 第一种。在输入的过程中，给每个记录一个[0,1]的随机数，最后取随机数最大的前m个记录。可以用m大的小根堆来维护。
    > 第二种，蓄水池抽样 或 reservoir sample。假设输入到第n个记录了，以m/n的概率取该数，如果取中则随机替换掉原来取中的m个记录中的一个。初始时，选中前m个记录。乍一看好像不靠谱，一证明就服了。证明也很简单。
    > 假设n-1时成立，即前n-1个记录，均以m/(n-1)的概率来判断是否选中。我们要证明，输入第n个记录后，前n个记录均以m/n的概率来判断是否选中。 
    > 对于第n个记录，以m/n的概率选择它，ok，满足要求。现在来看剩下的前n-1个记录。对于在前n-1记录中被选中的第i个记录，当前保持被选中的可能，要么是第n个记录没有被选中 (1-m/n) * (m/(n-1))，要么是第n个记录选中了但是i没有被替换掉 m/n * (m-1)/m * m/(n-1)，两者相加正好等于m/n，就是这么酷。

22. 在一条高速公路上，在30分钟内看到一辆汽车的可能性是0.95，那么在10分钟内看到一辆车的概率是多少?（假设过车的概率是恒定的）

    > 记10分钟内看到车的概率为p. 那么30分钟都没看到车的概率是(1−p)3=1−0.95=0.05 
    > 所以p=1−0.051/3

23. 你和朋友去参加一个晚会，带你和朋友在内，共有10人。你的朋友和你打赌，你找到一位和你同一天生日的，你就得到1美元，他找到的任何一个和你生日不同的人，他得到2美元。你会打这个赌吗？

    > 题目描述有些微妙，这里姑且这么理解，你找到一个相同生日的就得1美元，找到两个2美元，依次类推。他找到一个和你生日不同的得2美元，找到多少人都是2美元。 
    > 假设一年365天，大家都是同一年出生（同龄人嘛）。他拿到钱的期望是2∗(1−(1/365)10). 你拿到1美元的概率是 C1101/365(364/365)9, 2美元的概率是 C210(1/365)2(364/365)7…这是二项分布嘛，期望是np=10∗1/365=10/365. 看过来对方那个数更大，所以不能赌。

24. 飞机上有100个座位，按顺序从1到100编号。有100个乘客，他们分别拿到了从1号到100号的座位，他们按号码顺序登机并应当对号入座，如果他们发现对应号座位被别人坐了，他会在剩下空的座位随便挑一个坐。现在假如1号乘客疯了 -_-! (其他人没疯)，他会在100个座位中随机坐一个座位。那么第100人正确坐自己座位的概率是多少？
    注意登机是从1到100按顺序的。

    > 解答：
    > 可以看到，因为除了1号之外，所有的乘客都会对号入座，所以将对号入座的都去除，最后剩下1号，x号和100号。x号为1号所占位置。
    > 1号还有可能占的是自己的位置或者100号的位置，此时就没有x什么事情，x还是坐x号位置。但是这个情况在上面也是涵盖的。
    > 所以最终对1，x，100进行全排列，得到
    > 1     x   100
    > 100   x   1
    > x     1   100
    > 100   1   x
    > 1    100  x
    > x    100  1
    > 但是，对于最后两个组合，如果1号坐了自己的位置，那么x肯定坐自己的位置，100也肯定坐自己的位置。所以1  100  x不会发生。
    > 1号如果坐100号的位置，那x肯定坐自己的位置，100坐1号的位置，所以x  100  1也不会发生。
    > 所以最后的概率为2/4=50%

25. 两个信封，一封里装的钱是另一封里的两倍，你选了一个打开一看，里面是十块钱，这个时候你可以选择换成另一个，问你该不该换？

    > 第一印象肯定是换不换无所谓，因为貌似二者不相关。
    > 但是随后又会想到，另一个信封有一半可能是五块，一半可能是二十块，期望值会是1/2(5+20) = 12.5，当然应该换。

26. 有一苹果，两个人抛硬币来决定谁吃这个苹果，先抛到正面者吃。问先抛这吃到苹果的概率是多少？

    > 这种题目一看似乎答案就是1/2，但其实认真细想并没有那么简单。给所有的抛硬币操作从1开始编号，显然先手者只可能在奇数（1,3,5,7…）次抛硬币得到苹果，而后手只可能在偶数次（2,4,6,8…）抛硬币得到苹果。设先手者得到苹果的概率为p，第1次抛硬币得到苹果的概率为1/2，在第3次（3,5,7…）以后得到苹果的概率为p/4（这是因为这种只有在第1次和第2次抛硬币都没有抛到正面（概率为1/4=1/2*1/2）的时候才有可能发生，而且此时先手者在此面临和开始相同的局面）。所以可以列出等式p=1/2+p/4，p=2/3。

27. 有一对夫妇，先后生了两个孩子，其中一个孩子是女孩，问另一个孩子是男孩的概率是多大？

    > 答案是2/3.两个孩子的性别有以下四种可能：（男男）（男女）（女男）（女女），其中一个是女孩，就排除了（男男），还剩三种情况。其中另一个是男孩的占了两种，2/3.　之所以答案不是1/2是因为女孩到底是第一个生的还是第二个生的是不确定的。

28. 一个国家人们只想要男孩，每个家庭都会一直要孩子，只到他们得到一个男孩。如果生的是女孩，他们就会再生一个。如果生了男孩，就不再生了。那么，这个国家里男女比例如何？

    > 分析：
    >
    > 一开始想当然的以为男多女少，毕竟都想要男孩。但是注意这句话“如果生了男孩，就不再生了”，一个家庭可能有多个女孩，只有一个男孩。再仔细分析，我们来计算期望值，只用计算一个家庭就行了。设一个家庭男孩个数的期望值为S1，女孩为S2. 
    >
    > 根据题目条件，男孩的个数期望值S1=1这个是不用计算了。主要计算S2
    >
    > 一个家庭的孩子数量可以为:1,2,3,4,5…..  对应的的男女分布为: “男”,”女男”,”女女男”,”女女女男”,”女女女女男”…  
    >
    > 对应的概率分布为 1/2, 1/4, 1/8, 1/16, 1/32 。其中女孩的个数分别为 0,1,2,3,4……
    >
    > 因此 S2=0*1/2 + 1*1/4 + 2*1/8 + 3*1/16 + 4*1/32 + ………
    >
    > 可以按照题目2用级数求，也可以用错位相减法：S2=1/4+2/8+3/16+4/32+…  两边乘以2,得: 2*S2=1/2+2/4+3/8+4/16+5/32+..
    >
    > 两个式子相减得 S2=1/2+1/4+1/8+1/16+1/32+…=1. 所以期望值都为1，男女比例是一样的。

29. 世界上每十万人中就有一人是艾滋病患者。艾滋病的检测目前已经很准确，但并非万无一失。它的检测准确率是99%，假设你刚去做完艾滋病检验，得到的了检测报告，结果….是阳性！你会绝望或昏倒吗？或者说，你会担心到什么程度？

    > 分析：
    >
    > 你大可不必那么担心，因为你几乎可以确定没有得艾滋病。什么？检测是阳性还几乎可以确定没有艾滋病？！是的，为了说明这一点，假设有100万人和你做了同样的检验。在这100万人中，得病的会有10个，没有得病的有999990个。当这些人接受检验时，9~10个人患有艾滋病的人会呈现阳性反应，另外999990个没有得病的人则会有1%出现错误的阳性反应，换算成人数大概是1万人。也就是说，大约10000个阳性诊断中，实际只有10个左右是真正患者。因此，绝大多数所呈阳性的反应都是误诊。当你得到阳性的检测结果时，真正得艾滋病的机会大概只有千分之一。（当然，如果你在检测之前做了很可能感染艾滋病的事，那就另当别论了）

30. 100个人排队，每个人只能看到自己之前的人的帽子的颜色（假设只有黑白两色），每个人都得猜自己帽子的颜色，只能说一次，说错就死掉，别人可以听到之前的人的答案以及是否死掉。请问用什么策略说死掉的人最少。

    > 假设只有3个人，假设ture = 白，false = 黑，用这个公式x3 = (x1 == x2)，用人话就是1和2的帽子颜色一样的话就说白，不一样的话就说黑。这个策略第一个人死的概率是1/2，剩下的两个都不会死。 
    > 推广到4个人，也就是x4 = (x3 == (x1 == x2))，照理可以推广到100人。但问题就是人很难判断，只能靠计算机来算。 
    > 另一个解题方法：“最后一个人看一下前面黑帽子的个数是奇数还是偶数，比如约定奇数说黑，偶数说白。这样前面的人都可以推断出来正确的结果。”

31. .已知一随机发生器，产生0的概率是p，产生1的概率是1-p，现在要你构造一个发生器， 使得它构造0和1的概率均为1/2；构造一个发生器，使得它构造1、2、3的概率均为1/3；…， 构造一个发生器，使得它构造1、2、3、…n的概率均为1/n，要求复杂度最低。

    > 原始的随机数生成器，生成0 的概率为p,生成1的概率为1-p,那么怎么构造才能使得生成0和1的概率相等呢。或者说有两个独立的事件的概率是相等呢？
    >
    > 这样来做一下，让该随机数生成器生成两个数，那么序列是00,01,10,11概率分别为 p*p,p(1-p),(1-p)p,(1-p)*(1-p)
    >
    > 很明显，这四种情况中存在两个独立的事件概率是相等。也就是01和10，那么我把01看成是0,10看成是1，那么他们输出的概率均为p(1-p)，其他的情况舍弃。这样就得到了0和1均等生成的随机器了。
    >
    > 思维在扩展一下，生成1,2,…n的概率分别是1/n，也就是均等的。那么我们可以想怎么生成一个序列，里面有n个独立时间，概率是相等。而且我们能够猜测到这些概率的形式为 p^x*(1-p)^y,如果要相等，那么x必须等于y.这样就说明了序列中0和1的个数是相等的。而且这样的情况必须有多与n个才行。
    >
    > 数学表示就是 C(2x,x) >=n ，我们只需要知道x就能够知道序列要多长了。而且中间必定有超过n个概率为{p(1-p)}^x不相等序列。